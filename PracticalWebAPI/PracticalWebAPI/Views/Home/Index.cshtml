@section  Scripts {

    <script type="text/template" id="leadViewTemplate">
        <div class="col-lg-6">
            <h4><%= FirstName  %> <%= LastName %></h4>
            <ul>
                <li>Id #: <%= Id %></li>
                <li>Email: <%= Email %></li>
                <li>Location: <%= State %>, <%= Country%></li>
            </ul>
        </div>
    </script>

    <script>

        $(document).ready(function () {


            var Lead = Backbone.Model.extend({
                defaults: {
                    Id: 999,
                    FirstName: "Steve",
                    LastName: "Senkus",
                    Email: "mail@steven-senkus.com",
                    State: "OR",
                    Country: "US"
                },
                idAttribute: "Id",
                parse: function (res) {
                    return res;
                }


            });

            var Leads = Backbone.Collection.extend({
                url: "http://localhost:44420/api/lead",
                model: Lead,
                parse: function (response) {
                    console.log(response)
                    return response;
                }

            });


            var LeadView = Backbone.View.extend({
                template: _.template($('#leadViewTemplate').html()),
                initialize: function (options) {
                    console.log('this', this)
                    console.log('leadview initialize')
                    this.render()

                },
                render: function () {
                    console.log('LeadView rendered')
                    this.$el.html(this.template(this.model.toJSON()));
                    $('#leadContainer').append(this.$el);
                    return this;
                }

            });

            var LeadContainerView = Backbone.View.extend({
                el: $('#leadContainer'),
                initialize: function () {

                },
                render: function () {

                }

            });

            var leads = new Leads();
            leads.fetch().then(function () {
                leads.each(function (ld) {
                    console.log(ld.get("FirstName"));
                    var x = new LeadView({ model: ld });
                });
            }).then(function () {
                for (var i = 0; i < 5; i++) {
                    setTimeout(function () {
                        var x = new LeadView({ model: new Lead() });

                    }, (500 + (i * 1000)))
                }
            });




        });

    </script>
}



<div class="jumbotron">
    <h1>Backbone.js &amp; ASP.NET WebAPI </h1>
    <p class="lead">It's pretty cool, eh?</p>
    <p><a class="btn btn-lg btn-success" href="#" role="button">Join muh startup</a></p>
</div>

<div class="row marketing">
    <div class="col-lg-12" id="leadContainer">

    </div>

</div>